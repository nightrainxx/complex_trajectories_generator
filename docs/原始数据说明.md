# 轨迹数据说明文档

## 1. 数据概览

本项目使用的原始数据包含8条核心轨迹（sequence_1到sequence_8），每条轨迹都记录了车辆在复杂地形环境下的运动状态。数据存储在`data/core_trajectories/`目录下，采用CSV格式。

## 2. 数据结构

### 2.1 轨迹数据字段

每条轨迹包含以下字段：

| 字段名 | 单位 | 说明 |
|-------|------|------|
| timestamp_ms | 毫秒 | 时间戳 |
| latitude | 度 | 纬度 |
| longitude | 度 | 经度 |
| altitude_m | 米 | 海拔高度 |
| velocity_north_ms | 米/秒 | 北向速度分量 |
| velocity_east_ms | 米/秒 | 东向速度分量 |
| velocity_down_ms | 米/秒 | 垂直速度分量 |
| velocity_2d_ms | 米/秒 | 水平面速度大小 |
| velocity_3d_ms | 米/秒 | 三维速度大小 |
| heading_deg | 度 | 航向角（相对于正北方向） |
| acceleration_x_ms2 | 米/秒² | X方向加速度 |
| acceleration_y_ms2 | 米/秒² | Y方向加速度 |
| acceleration_z_ms2 | 米/秒² | Z方向加速度 |
| angular_velocity_x_rads | 弧度/秒 | X轴角速度 |
| angular_velocity_y_rads | 弧度/秒 | Y轴角速度 |
| angular_velocity_z_rads | 弧度/秒 | Z轴角速度 |
| angular_velocity_rads | 弧度/秒 | 角速度大小 |
| horizontal_acceleration_ms2 | 米/秒² | 水平加速度 |
| vertical_acceleration_ms2 | 米/秒² | 垂直加速度 |
| acceleration_magnitude_ms2 | 米/秒² | 加速度大小 |
| distance_m | 米 | 累计行驶距离 |
| delta_time_s | 秒 | 相邻采样点的时间间隔 |
| calculated_speed_ms | 米/秒 | 根据距离和时间计算的速度 |

### 2.2 环境数据

环境数据存储在`data/raw/`目录下：

1. DEM数据（`dem/dem_30m_100km.tif`）：
   - 分辨率：30米
   - 覆盖范围：100km × 100km
   - 数据类型：高程值（米）

2. 坡度数据（`dem/slope_30m_100km.tif`）：
   - 分辨率：30米
   - 数据范围：0-45度
   - 说明：从DEM数据计算得到

3. 坡向数据（`dem/aspect_30m_100km.tif`）：
   - 分辨率：30米
   - 数据范围：0-360度（北为0，顺时针）
   - 说明：从DEM数据计算得到

4. 地表覆盖数据（`landcover/landcover_30m_100km.tif`）：
   - 分辨率：30米
   - 数据类型：分类值

## 3. 数据特征分析

### 3.1 轨迹基本特征

分析8条轨迹的基本特征，我们发现：

1. 时长分布：
   - 最短轨迹约1770秒（约29.5分钟）
   - 最长轨迹约3730秒（约62分钟）
   - 大多数轨迹在2000-2400秒之间

2. 速度特征：
   - 平均速度范围：14.4-19.8 km/h
   - 最高速度范围：27.9-31.9 km/h
   - 最低速度：部分轨迹有完全停止的情况（速度为0）
   - 速度标准差：4.4-8.2 km/h，表明速度波动较大

3. 采样特征：
   - 采样点数量：7000-15000点不等
   - 平均采样频率：约4Hz（每秒4个采样点）

### 3.2 环境特征

1. 地形特征：
   - 坡度范围：0-45度
   - 平地（坡度<1度）占比：约7.2%
   - 坡度分布：主要集中在0-30度范围

2. 地表类型：
   - 使用分类值表示不同地表类型
   - 需要进一步分析每种类型的具体含义和分布

### 3.3 数据质量分析

1. 速度数据：
   - 提供了多种速度测量：
     * 分量速度（北向、东向、垂直方向）
     * 合成速度（2D和3D）
     * 计算速度（基于距离和时间）
   - 可以交叉验证不同速度测量的一致性

2. 位置数据：
   - 使用经纬度和海拔表示
   - 配合DEM数据可以验证高程测量的准确性

3. 运动状态：
   - 提供了完整的运动状态描述：
     * 位置（经纬度、高程）
     * 速度（线速度、角速度）
     * 加速度（线加速度、角加速度）
   - 数据冗余有助于交叉验证

## 4. 数据使用建议

1. 速度建模：
   - 使用`velocity_2d_ms`作为主要速度指标
   - 考虑速度的大范围变化（0-32 km/h）
   - 注意处理停车和启动的特殊情况

2. 环境特征：
   - 结合坡度、坡向和地表类型进行综合分析
   - 考虑环境特征的空间分布和变化

3. 数据预处理：
   - 对异常值进行适当处理
   - 考虑使用滑动窗口平滑数据
   - 注意保持速度变化的真实特征

4. 验证方法：
   - 使用不同速度指标交叉验证
   - 结合加速度数据验证速度变化的合理性
   - 使用环境数据验证速度变化与地形的关系

<function_calls>
<invoke name="run_terminal_cmd">
<parameter name="command">python -c "
import pandas as pd
import numpy as np
import glob

stats = []
for file in sorted(glob.glob('data/core_trajectories/sequence_*_core.csv')):
    df = pd.read_csv(file)
    stats.append({
        '轨迹': file.split('_')[1],
        '总时长(秒)': df['delta_time_s'].sum(),
        '总距离(公里)': df['distance_m'].iloc[-1] / 1000,
        '平均速度(km/h)': df['velocity_2d_ms'].mean() * 3.6,
        '最大速度(km/h)': df['velocity_2d_ms'].max() * 3.6,
        '最小速度(km/h)': df['velocity_2d_ms'].min() * 3.6,
        '速度标准差(km/h)': df['velocity_2d_ms'].std() * 3.6,
        '采样点数': len(df)
    })
print('轨迹数据统计：\\n')
print(pd.DataFrame(stats).to_markdown(index=False))
"
</code_block_to_apply_changes_from> 